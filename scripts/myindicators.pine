// this includes Bollinger band, MA20 into 1 indicator
// this creates an alert when price is out of bollinger band

// overlay = true: indicator will overlay the candle chart, like MA, BB
// otherwise, it won't, like MACD
study(title="BB + MA", overlay=true)


price = input(close)

// bolliger band
BB_length = input(50, minval=1, title="BB Length")
BB_sdev = input(2.0, minval=0.001, maxval=50, title="StdDev")
// MA
ma_length = input(20, minval=1, title="MA Length")


// drawing BB
dev = BB_sdev * stdev(close, BB_length)
upper = sma(close, BB_length) + dev
lower = sma(close, BB_length) - dev
plot(upper, title="Upper", color=#2B8A84, linewidth=2)
plot(lower, title="Lower", color=#2B8A84, linewidth=2)
plot(sma(close, BB_length), title="Basic", color=fuchsia, linewidth=3)

// drawing MA
plot(sma(close, ma_length), title="MA20", color=aqua, linewidth=3)

// crossover upper line
c1 = crossover(price, upper)

// cross under lower line
c2 = crossunder(price, lower)
alertcondition(c1 or c2, title='Price is out of BB', message='Price is out of BB')

